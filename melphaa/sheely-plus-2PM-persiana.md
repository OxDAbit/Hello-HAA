# Shelly Plus 2 PM

<img src="https://templates.blakadder.com/assets/device_images/shelly_plus_2PM.webp" alt="Shelly-plus-2pm" width="450"/>

## Subir y Bajar persianas exteriores

### `Melphaa` _script_ para subir al dispositivo

```json
{"c":{"io":[[[12,13,0],2],[[4],6,1],[[5,18],6,0,1],[[35],10,0,3],[[27]]],"l":0,"n":"device-hostname","b":[[4,5]],"ic":[[25,26,100]]},"a":[{"t":45,"o":18,"c":14,"f":70,"0":{"r":[[13],[12,1]],"m":[[2,-10001],[3,-10001]]},"1":{"r":[[13,1],[12]],"m":[[2,-10001],[3,-10001]]},"2":{"r":[[13],[12]],"m":[[2,-10000],[3,-10000]]},"3":{"r":[[13],[12,0,0.2]],"m":[[2,-10001],[3,-10001]]},"4":{"r":[[13,0,0.2],[12]],"m":[[2,-10001],[3,-10001]]},"8":{"m":[[0,101]]},"f0":[[5,0]],"f1":[[18,0]],"f2":[[5],[18]],"es":[{"t":75,"h":2,"ks":0,"j":2,"cd":0.95,"n":2,"dt":[0,56],"vf":0.0000382602,"vo":-0.068,"cf":0.00000949523,"co":-0.017,"pf":0.006097560976,"y1":[{"v":2,"r":1,"0":{"m":[[1,-1]]}},{"v":2.5}]},{"t":75,"h":2,"ks":0,"j":2,"cd":0.45,"n":3,"dt":[0,56],"vf":0.0000382602,"vo":-0.068,"cf":0.00000949523,"co":-0.017,"pf":0.006097560976,"y1":[{"v":2,"r":1,"0":{"m":[[1,-1]]}},{"v":2.5}]},{"t":22,"h":2,"n":5,"g":35,"j":5,"y0":[{"v":75,"r":1,"0":{"m":[[1,-1]]}}]}]}]}
```

### Descripción del script

```json
{
  "c": {
    "io": [                   // Configuración de los GPIO's
      [[12, 13, 0], 2],       // Se seleccionan los GPIO 12, 13 y 0 como pines de salida
      [[4], 6, 1],            // Se selecciona el GPIO 4 como pin de entrada con la resistencia de pull-up interna habilitada y señal invertida
      [[5, 18], 6, 0, 1],
      [[35], 10, 0, 3],
      [[27]]
    ],
    "l": 0,                   // Se selecciona el GPIO 0 como led de estado del dispositivo
    "n": "device-hostname",   // Hostname del dispositivo
    "b": [[4, 5]],            // Se selecciona el GPIO 4 para activar el modo setup tras mantener pulsado el botón 8 segundos (opción 5)
    "ic": [[25, 26, 100]]
  },
  "a": [
    {
      "t": 45,
      "o": 18,
      "c": 14,
      "f": 70,
      "0": {
        "r": [[13], [12, 1]],
        "m": [
          [2, -10001],
          [3, -10001]
        ]
      },
      "1": {
        "r": [[13, 1], [12]],
        "m": [
          [2, -10001],
          [3, -10001]
        ]
      },
      "2": {
        "r": [[13], [12]],
        "m": [
          [2, -10000],
          [3, -10000]
        ]
      },
      "3": {
        "r": [[13], [12, 0, 0.2]],
        "m": [
          [2, -10001],
          [3, -10001]
        ]
      },
      "4": {
        "r": [[13, 0, 0.2], [12]],
        "m": [
          [2, -10001],
          [3, -10001]
        ]
      },
      "8": { "m": [[0, 101]] },
      "f0": [[5, 0]],
      "f1": [[18, 0]],
      "f2": [[5], [18]],
      "es": [
        {
          "t": 75,
          "h": 2,
          "ks": 0,
          "j": 2,
          "cd": 0.95,
          "n": 2,
          "dt": [0, 56],
          "vf": 0.0000382602,
          "vo": -0.068,
          "cf": 0.00000949523,
          "co": -0.017,
          "pf": 0.006097560976,
          "y1": [{ "v": 2, "r": 1, "0": { "m": [[1, -1]] } }, { "v": 2.5 }]
        },
        {
          "t": 75,
          "h": 2,
          "ks": 0,
          "j": 2,
          "cd": 0.45,
          "n": 3,
          "dt": [0, 56],
          "vf": 0.0000382602,
          "vo": -0.068,
          "cf": 0.00000949523,
          "co": -0.017,
          "pf": 0.006097560976,
          "y1": [{ "v": 2, "r": 1, "0": { "m": [[1, -1]] } }, { "v": 2.5 }]
        },
        {
          "t": 22,
          "h": 2,
          "n": 5,
          "g": 35,
          "j": 5,
          "y0": [{ "v": 75, "r": 1, "0": { "m": [[1, -1]] } }]
        }
      ]
    }
  ]
}
```
